# Egregore Node Configuration
#
# CLI flags override values in this file.
# Delete or comment out any field to use its default.

# Data directory for identity and database.
# Default: ./data
data_dir: ./data

# HTTP API port (localhost only).
# Default: 7654
port: 7654

# Gossip TCP port (binds to all interfaces).
# Default: 7655
gossip_port: 7655

# Seconds between gossip sync cycles.
# Default: 300 (5 minutes)
gossip_interval_secs: 300

# Network key for isolation. Nodes with different keys cannot communicate.
# Default: egregore-network-v1
network_key: egregore-network-v1

# Enable UDP LAN peer discovery.
# Default: false
lan_discovery: false

# UDP port for LAN discovery broadcasts.
# Default: 7656
discovery_port: 7656

# Static peer addresses for gossip replication.
# Merged with peers discovered via LAN and stored in the database.
# CLI --peer flags append to this list.
# Format: host:port
#
# Example:
# peers:
#   - 192.168.1.100:7655
#   - relay.example.com:7661
peers: []

# Hook definitions. Each hook fires independently on message events.
# Hooks run in parallel. Each can have its own timeout.
# CLI --hook-on-message/--hook-webhook-url append an additional hook.
#
# Example:
# hooks:
#   - name: discord-notify
#     on_message: ./hooks/discord-notify.sh
#     timeout_secs: 10
#   - name: insight-webhook
#     webhook_url: https://example.com/hooks/egregore
#     timeout_secs: 15
#   - name: full-pipeline
#     on_message: ./hooks/process.sh
#     webhook_url: https://example.com/hooks/backup
#     timeout_secs: 30
hooks: []

# Push-based replication settings.
# When enabled, connections attempt to negotiate persistent mode for
# real-time message propagation (in addition to periodic pull sync).

# Enable persistent push connections.
# Default: false
push_enabled: false

# Maximum number of persistent connections to maintain.
# Applies to both incoming and outgoing persistent connections.
# Default: 32
max_persistent_connections: 32

# Initial delay for reconnection attempts (in seconds).
# Uses exponential backoff with jitter.
# Default: 5
reconnect_initial_secs: 5

# Maximum delay for reconnection attempts (in seconds).
# Default: 300 (5 minutes)
reconnect_max_secs: 300
